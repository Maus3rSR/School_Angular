<div class="wishflix-shell">
  <header class="navbar wishflix-shell__navbar" aria-label="Navigation principale">
    <div class="navbar-start">
      <p class="wishflix-shell__brand">{{ nomApplication }}</p>
      <span class="wishflix-shell__tagline">Gaming</span>
    </div>

    <div class="navbar-end">
      <!-- Navigation utilisateur -->
    </div>
  </header>

  <main class="wishflix-main" id="contenu-principal">
    <section class="hero wishflix-hero" aria-labelledby="titre-hero">
      <div class="hero-content wishflix-hero__content">
        <div>
          <h1 id="titre-hero" class="wishflix-hero__title">Bienvenue sur {{ nomApplication }}</h1>
          <p class="wishflix-hero__slogan">{{ slogan }}</p>

          <div class="wishflix-hero__actions">
            <button type="button" class="btn btn-primary" (click)="basculerFiltreDisponibilite()">
              @if (afficherSeulementDisponibles()) {
              Afficher tout le catalogue
              } @else {
              Afficher seulement les jeux disponibles
              }
            </button>

            <button type="button" class="btn btn-outline" [disabled]="nombreFavoris() === 0"
              (click)="reinitialiserFavoris()">
              Vider ma wishlist ({{ nombreFavoris() }})
            </button>
          </div>
        </div>
      </div>
    </section>

    <section aria-labelledby="titre-catalogue" class="wishflix-catalogue">
      <div class="wishflix-catalogue__header">
        <h2 id="titre-catalogue" class="wishflix-catalogue__title">Catalogue de jeux</h2>
        <p class="wishflix-catalogue__subtitle">
          Decouvre notre selection de jeux video
        </p>
      </div>

      <div class="stats shadow wishflix-catalogue__stats" role="group" aria-label="Statistiques catalogue">
        <div class="stat">
          <div class="stat-title">Jeux disponibles</div>
          <div class="stat-value text-primary">{{ jeuxVisibles().length }}</div>
        </div>

        <div class="stat">
          <div class="stat-title">Ma Wishlist</div>
          <div class="stat-value text-accent">{{ nombreFavoris() }}</div>
        </div>
      </div>

      @if (jeuxVisibles().length === 0) {
      <p class="alert alert-info" role="status">
        Aucun jeu visible pour l'instant. Verifie le filtre puis recharge les donnees.
      </p>
      } @else {
      <div class="wishflix-catalogue__grid">
        @for (jeu of jeuxVisibles(); track jeu.id) {
        <article class="card game-card" aria-label="Jeu {{ jeu.titre }}">
          <figure class="game-card__cover">
            <img [src]="'https://dev.me/products/image-placeholder/300x450/Games/' + jeu.id" [alt]="jeu.titre"
              width="300" height="450" loading="lazy" />
          </figure>
          <div class="card-body game-card__body">
            <div class="game-card__badges">
              <span class="badge badge-secondary">{{ jeu.categorie }}</span>
              <span class="badge badge-ghost">{{ jeu.genre }}</span>
            </div>

            <h3 class="card-title game-card__title">{{ jeu.titre }}</h3>
            <p class="game-card__meta">
              {{ jeu.anneeSortie }} - {{ jeu.plateforme }}
            </p>
            <div class="game-card__rating">
              <span class="game-card__rating-value">{{ jeu.note }}</span>
              <span class="game-card__rating-max">/5</span>
            </div>
            <p class="game-card__synopsis">{{ jeu.synopsis }}</p>

            <div class="card-actions game-card__actions">
              <span class="badge" [class.badge-success]="jeu.disponible" [class.badge-error]="!jeu.disponible">
                @if (jeu.disponible) {
                Disponible
                } @else {
                Bientot disponible
                }
              </span>

              <button type="button" class="btn btn-sm" [class.btn-primary]="estEnFavoris(jeu.id)"
                [class.btn-outline]="!estEnFavoris(jeu.id)" (click)="basculerFavori(jeu.id)"
                [attr.aria-pressed]="estEnFavoris(jeu.id)">
                @if (estEnFavoris(jeu.id)) {
                Retirer de la wishlist
                } @else {
                Ajouter a la wishlist
                }
              </button>
            </div>
          </div>
        </article>
        }
      </div>
      }
    </section>

    <section class="alert alert-warning wishflix-todo" aria-label="Feuille de route pedagogique">
      <span>
        TODO pedagogiques: Seance 2 (composants et communication), Seance 3 (services HTTP),
        Seance 4 (routing et navigation), Seance 5 (formulaires et authentification).
      </span>
    </section>
  </main>
</div>